[null,{"name":"FindMusicServers","temp":"","event-type":"0","_id":"WkTzH","actions":[{"server":"1","varName":"server","name":"Change Server"},{"iftrue":"0","iftrueVal":"","iffalse":"3","iffalseVal":"1","name":"Check is Bot in Voice Channel"},{"storage":"1","varName":"list","addType":"0","position":"","value":"`${tempVars(\"server\").name} - (${tempVars(\"server\").id})`","name":"Add Item to List"},{"comment":"Skip","color":"#000000","name":"Comment"}]},{"name":"crachserversetup","temp":"anymessage","event-type":"0","_id":"USEIi","actions":[{"storage":"1","varName":"anymessage","comparison":"1","value":"\"!verify\"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"server":"0","varName":"","info":"1","storage":"1","varName2":"serverid","name":"Store Server Info"},{"storage":"1","varName":"serverid","comparison":"1","value":"\"520550904319967267\"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"anymessage","info":"3","storage":"1","varName2":"msgaurthor","name":"Store Message Info"},{"message":"1","varName":"anymessage","info":"1","storage":"1","varName2":"msgid","name":"Store Message Info"},{"message":"1","varName":"anymessage","info":"4","storage":"1","varName2":"msgchannel","name":"Store Message Info"},{"member":"2","varName":"msgaurthor","info":"0","storage":"1","varName2":"tag","name":"Store Member Info"},{"member":"2","varName":"msgaurthor","info":"0","storage":"1","varName2":"memberobject","name":"Store Member Info"},{"channel":"3","varName":"msgchannel","info":"1","search":"${tempVars(\"msgid\")}","storage":"1","varName2":"mainmsg","name":"Find Message"},{"channel":"5","varName":"msgaurthor","message":"You have entered the server make sure to follow the rules to get full access to server DM any CPORFAAO members or any Admin or Mods\nWe will add your role under 8 hours\nIf we don't add please join this server and DM\nAppworld23™||dank||#7248\nhttps://discord.gg/dtBWruu\n\nThis system is setup by Appworld23™||dank||#7248","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"channel":"5","varName":"msgchannel","message":"@${tempVars(\"tag\")} ${tempVars(\"msgaurthor\")} You are now verified ","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"info":"0","find":"706354736206577674","storage":"1","varName":"verifiedrole","name":"Find Role"},{"info":"0","find":"706354616853332048","storage":"1","varName":"unverified role","name":"Find Role"},{"member":"2","varName2":"${tempVars(\"membe\")}","role":"3","varName":"verifiedrole","name":"Add Member Role"},{"member":"2","varName2":"${tempVars(\"membe\")}","role":"3","varName":"unverified role","name":"Remove Member Role"},{"info":"1","find":"bot-updates","storage":"1","varName":"botupch","name":"Find Channel"},{"channel":"5","varName":"botupch","message":"Boink Boink Boink Boink Boink Boink \nAlert `${tempVars(\"tag\")}` entered the server\nBoink Boink Boink Boink Boink Boink \nAlert mods @Arfao @CPORFAAO  \nPlease verify ${tempVars(\"tag\")}","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}]},{"name":"giveawayStart","temp":"","event-type":"1","_id":"jEKcf","actions":[{"behavior":"0","interpretation":"0","code":"const fs = require('fs');\n\nif (globalVars(\"giveawayStartRan\") == null) {\n    this.storeValue(1, 3, \"giveawayStartRan\", cache);\n    if (!fs.existsSync('./data/giveawayData.json')) {\n        fs.writeFile(\"./data/giveawayData.json\", \"{}\", function(err) {\n            if (err) {\n                return console.log(err);\n            }\n        });\n    }\n}","storage":"0","varName":"","name":"Run Script"}],"restriction":"0"},{"name":"bot-dm-log-embed","temp":"dm-msg","event-type":"2","actions":[{"behavior":"0","interpretation":"1","code":"tempVars(\"dm-msg\").member == null ? tempVars(\"dm-msg\").channel.recipient.tag : \"\"","storage":"1","varName":"username","name":"Run Script"},{"storage":"1","varName":"username","comparison":"0","value":"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"behavior":"0","interpretation":"1","code":"tempVars(\"dm-msg\").content","storage":"1","varName":"msg-content","name":"Run Script"},{"behavior":"0","interpretation":"1","code":"tempVars(\"dm-msg\").channel.recipient.avatarURL","storage":"1","varName":"auth_URL","name":"Run Script"},{"member":"2","varName":"dm-msg","info":"18","storage":"1","varName2":"author","name":"Store Member Info"},{"info":"0","find":"615194751427411978","storage":"1","varName":"srver","name":"Find Server"},{"server":"1","varName":"srver","name":"Change Server"},{"info":"0","find":"648546506625777670","storage":"1","varName":"logchannel","name":"Find Channel"},{"title":"","author":"","color":"","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"","storage":"1","varName":"e","name":"Create Embed Message"},{"storage":"1","varName":"e","fieldName":"Message","message":"${tempVars(\"msg-content\")}\n\n\n","inline":"1","name":"Add Embed Field"},{"behavior":"0","interpretation":"0","code":"tempVars(\"e\").setFooter(tempVars(\"username\"), tempVars(\"auth_URL\"))","storage":"0","varName":"","name":"Run Script"},{"storage":"1","varName":"e","channel":"5","varName2":"logchannel","name":"Send Embed Message"}],"_id":"QQIMC"},{"name":"Music Setup","temp":"","event-type":"1","_id":"PZPZX","actions":[{"behavior":"3","name":"Run Action Sequence Once"},{"comment":"This Modifys the bot.js file to allow the Now Playing command to work!!","color":"#ff0000","name":"Comment"},{"comment":"This also makes sure the REQUIRED modules are installed!","color":"#ff0000","name":"Comment"},{"behavior":"1","interpretation":"1","code":"const wm = this.getWrexMods();\nwm.require('simple-youtube-api');\nwm.require('youtube-info');\nwm.require('node-gyp');\nwm.require('node-opus');\nwm.require('ytdl-core');\nActions.callNextAction(cache);","storage":"0","varName":"","name":"Run Script"},{"name":"Welcome"}]},{"name":"Queue-GetYTtitles","temp":"","event-type":"0","_id":"qMFbM","actions":[{"type":"0","input":"${tempVars(\"url\")}","info0":"1","info1":"1","apikey":"AIzaSyD8Nm686NOkA4-9ZwCdbu3dyPmIXBf87xA","results":"1","storage":"1","varName":"res","name":"YouTube Search"},{"storage":"1","varName":"res","comparison":"0","value":"","iftrue":"3","iftrueVal":"2","iffalse":"0","iffalseVal":"","name":"Check Variable"},{"storage":"1","varName":"list-title","addType":"0","position":"","value":"\"*Couldn't find video name!*\"","name":"Add Item to List"},{"count":"1","name":"Skip Actions"},{"storage":"1","varName":"list-title","addType":"0","position":"","value":"\"• \" + tempVars(\"res\")","name":"Add Item to List"},{"comment":"sorted","color":"#000000","name":"Comment"}]},{"name":"massmention","temp":"message","event-type":"2","_id":"XWhCZ","actions":[{"server":"0","varName":"","dataName":"MassMention","comparison":"1","value":"1","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Server Data"},{"message":"1","varName":"message","info":"14","storage":"1","varName2":"mentioneduserscount","name":"Store Message Info"},{"storage":"1","varName":"mentioneduserscount","comparison":"4","value":"5","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"message","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"message":"1","varName":"message","info":"3","storage":"1","varName2":"author","name":"Store Message Info"},{"storage":"1","varName":"message","name":"Delete Message"},{"channel":"5","varName":"channel","message":"${tempVars(\"author\")} Has been warned. mentioning over 5 members is not allowed.","storage":"0","varName2":"","name":"Send Message"}]},{"name":"autorole-on-member-join","temp":"memberjoins","event-type":"6","_id":"Mbojf","actions":[{"server":"0","varName":"","dataName":"serverroleidout","comparison":"1","value":"0","iftrue":"1","iftrueVal":"","iffalse":"0","iffalseVal":"","name":"Check Server Data"},{"server":"0","varName":"","dataName":"autorolesecondout","defaultVal":"0","storage":"1","varName2":"secount3out","name":"Store Server Data"},{"time":"${tempVars(\"secount3out\")}","measurement":"1","name":"Wait"},{"server":"0","varName":"","dataName":"serverroleidout","defaultVal":"0","storage":"1","varName2":"roleid","name":"Store Server Data"},{"info":"0","find":"${tempVars(\"roleid\")}","storage":"1","varName":"setrole","name":"Find Role"},{"time":"0.6","measurement":"1","name":"Wait"},{"member":"2","varName2":"memberjoins","role":"3","varName":"setrole","name":"Add Member Role"}]},{"name":"AntiInvite","temp":"message","event-type":"2","_id":"hMNTI","actions":[{"storage":"2","varName":"ANTIINVITE","comparison":"0","value":"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"storage":"2","varName":"ANTIINVITE","comparison":"1","value":"\"ON\"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"message","info":"2","storage":"1","varName2":"txt","name":"Store Message Info"},{"storage":"1","varName":"txt","comparison":"5","value":"discord.gg","iftrue":"3","iftrueVal":"1","iffalse":"0","iffalseVal":"","name":"Check Variable"},{"storage":"1","varName":"txt","comparison":"5","value":"discordapp.com/invite","iftrue":"0","iftrueVal":"1","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"message","info":"3","storage":"1","varName2":"author","name":"Store Message Info"},{"message":"1","varName":"message","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"server":"0","varName":"","storage":"2","varName2":"botmem","name":"Get Bot as Member"},{"member":"3","varName":"botmem","permission":"MANAGE_MESSAGES","iftrue":"0","iftrueVal":"","iffalse":"3","iffalseVal":"1","name":"Check Member Permissions"},{"storage":"1","varName":"message","name":"Delete Message"},{"channel":"5","varName":"channel","message":"**Don't advertise, loser ${tempVars(\"author\")}!**","storage":"0","varName2":"","name":"Send Message"}]},{"name":"WrexMusicFix","temp":"","event-type":"1","_id":"wLJvt","desc":"Put this above all other events in the list.  This is a testing fix, please report if it worked for you or not to General Wrex.","actions":[{"code":"Audio.playYt = function(url, options, id) {\n\tif(!this.ytdl) return false;\n\tconst stream = this.ytdl(url, {\n\t\tquality: 'highestaudio',\n\t\thighWaterMark: 1024 * 1024 * 25 // 25 megabytes\n\t});\n\n\toptions.highWaterMark = 1;\n\n\tthis.dispatchers[id] = this.connections[id].playStream(stream, options);\n\treturn true;\n};","behavior":"0","interpretation":"0","storage":"0","varName":"","VTypeSelect":"0","CVTypeValue":"","name":"Run Script"}]},{"name":"Load Server Prefixes","temp":"","event-type":"1","_id":"serverprefixes","actions":[{"behavior":"1","interpretation":"0","code":"// Make sure it only runs once!!\n//------------\n\nif(!globalVars(\"server_prefixes_loaded\")){ \n  this.callNextAction(cache);\n  this.storeValue(true, 3,\"server_prefixes_loaded\", cache);\n}","storage":"0","varName":"","name":"Run Script"},{"code":"Bot.prefixes = {};\nconsole.log('(Server Prefixes) Initiating Server Prefixes....');\nBot.checkCommand = function(msg) {\n\tconst fs = require(\"fs\");\n\tconst path = require(\"path\");\n   \n    if (!msg.guild) return;\n\n\ttry {\n\t\tconst defaultTag = Files.data.settings.tag;\n\t\tconst separator = Files.data.settings.separator || '\\\\s+';\n\t\n\t\tlet content = msg.content;\n\t\tlet guild = msg.guild;\n\t\n\t\tcontent = content.split(new RegExp(separator))[0];\n\t\n\t\tconst filePath = path.join(\"data\",\"serverPrefixes.json\");\t\t\n\t\tif(fs.existsSync(filePath)){\n\t\t\tlet saved_prefixes = fs.readFileSync(filePath, \"utf8\");\n\t\t\ttry {\n\t\t\t\tthis.prefixes = JSON.parse(saved_prefixes);\t\t\n\t\t\t} catch(err){}\t\t\t\n\t\t}else{\n\t\t\tthis.prefixes[guild.id] = defaultTag;\n\t\t\tfs.writeFileSync(filePath, JSON.stringify(this.prefixes));\n\t\t}\n\n\t\tlet tag = this.prefixes[guild.id] || defaultTag;\n\n                if(Array.isArray(this.prefixes)){ \n                  console.log(\"Old version serverPrefixes.json detected.  Please remove serverPrefixes.json and restart your bot otherwise setting new prefixes will not work!\")\n                  tag = defaultTag;\n                }\n\n\t\tif(tag){\t\n\t\t\tif(guild) guild.tag = tag;\t\n\n\t\t\tif(content.startsWith(tag)) {\t\t\t\t\n\t\t\t\tlet command = content.substring(tag.length);\n\t\t\t\tif(command) {       \n\t\t\t\t\tif(!Bot._caseSensitive) {\n\t\t\t\t\t\tcommand = command.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\tconst cmd = Bot.$cmds[command];\n\t\t\t\t\tif(cmd) {\t\t\t\t\t\n\t\t\t\t\t\tActions.preformActions(msg, cmd);\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\t\t\t\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n   \n};\nconsole.log('(Server Prefixes) Loaded Function Overwrite: CheckCommand');\n","behavior":"0","interpretation":"0","storage":"0","varName":"","VTypeSelect":"0","CVTypeValue":"","name":"Run Script"}]},{"name":"Multiple Bot Owners","temp":"","event-type":"1","_id":"weEij","actions":[{"comment":"For DBM Version 1.3.0+","color":"#0bf416","name":"Comment"},{"storage":"3","varName":"owners","name":"Create List"},{"comment":"items in this list are bot owners","color":"#00ff00","name":"Comment"},{"storage":"3","varName":"owners","addType":"0","position":"","value":"\"608972177823498240\"","name":"Add Item to List"},{"storage":"3","varName":"owners","addType":"0","position":"","value":"\"411421458431082506\"","name":"Add Item to List"},{"comment":"This Run Script alters the standard check conditions function","color":"#ff0000","name":"Comment"},{"behavior":"1","interpretation":"1","code":"// Created by General Wrex, if any questions arise please\n// find me on DBM Network #support channel.\nlet owners = globalVars(\"owners\");\nowners.push(Files.data.settings.ownerId)\n\nActions.checkConditions = function(msg, cmd) {\n\tconst isServer = Boolean(msg.guild && msg.member);\n\tconst restriction = parseInt(cmd.restriction);\n\tconst permissions = cmd.permissions;\n\tswitch(restriction) {\n\t\tcase 0:\n\t\t\tif(isServer) {\n\t\t\t\treturn this.checkPermissions(msg, permissions);\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\tcase 1:\n\t\t\treturn isServer && this.checkPermissions(msg, permissions);\n\t\tcase 2:\n\t\t\treturn isServer && msg.guild.owner === msg.member;\n\t\tcase 3:\n\t\t\treturn !isServer;\n\t\tcase 4:\n\t\t\treturn owners.length > 0 && owners.includes(msg.author.id)\n\t\tdefault:\n\t\t\treturn true;\n\t}\n};\n\nconsole.log('[Overwrites](Multiple Bot Owners) Actions.checkConditions Loaded');","storage":"0","varName":"","name":"Run Script"}]},{"name":"giveawayCheck","temp":"10","event-type":"3","_id":"eavvT","actions":[{"behavior":"0","interpretation":"1","code":"const fs = require('fs');\nconst Discord = require('discord.js');\nlet giveawaysDue = [];\nvar timeNow = Math.floor(Date.now() / 1000);\nvar counter = 0;\nvar interval;\nif (globalVars(\"giveawayRan\") == null) {\n    this.storeValue(1,3,\"giveawayRan\",cache);\n\n    fs.readFile('./data/giveawayData.json', async function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        data = JSON.parse(data);\n    \n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                let giveaways = data[key];\n                let dueGive = await giveaways.filter(({\n                    finishUnix\n                }) => finishUnix <= timeNow);\n                if (dueGive.length > 0) {\n                    dueGive.forEach(async f => {\n                        giveawaysDue.push(f);\n                        giveaways.splice(giveaways.findIndex(e => e.id === f.id), 1)\n                    });\n    \n                    fs.writeFile(\"./data/giveawayData.json\", JSON.stringify(data), function(err) {\n                        if (err) {\n                            return console.log(err);\n                        }\n                    });\n                }\n            }\n        }\n        if (giveawaysDue.length > 0) {\n            interval = setInterval(drawWinners, 2000);\n        }\n        \n    })\n}\n\nasync function drawWinners() {\n        var channelToFetch = await client.channels.get(giveawaysDue[counter][\"channel\"]);\n        if (channelToFetch != null) {\n            var giveawayMessage = await channelToFetch.fetchMessage(giveawaysDue[counter][\"giveawayMessageID\"]);\n            var giveawayUsers = await giveawayMessage.reactions.get('🎉').fetchUsers();\n            giveawayUsers = giveawayUsers.array();\n            giveawayUsers = await giveawayUsers.filter(object => object.id != client.user.id);\n            var numberOfWinners = parseInt(giveawaysDue[counter][\"winner\"]);\n            var gw = giveawayMessage.embeds[0];\n\n            var giveawayEmbed = new Discord.RichEmbed({\n                color: 0x000000,\n                author: {\n                    name: '🎉 Giveaway Ended 🎉',\n                    icon_url: (client || this.getDBM().Bot.bot).user.avatarURL\n                },\n                description: gw.description,\n                footer: {\n                    text: gw.footer.text\n                }\n            })\n            var winnerArray = [];\n            var winnerText = \"\";\n            if (giveawayUsers.length > 0) {\n                if (giveawayUsers.length > numberOfWinners) {\n                    for (var i = 0; i < numberOfWinners; i++) {\n                        var randomNumber = Math.floor(Math.random() * giveawayUsers.length);\n                        var randomuser = giveawayUsers[randomNumber];\n                        winnerArray.push(randomuser);\n                        giveawayUsers.splice(giveawayUsers.indexOf(randomNumber), randomNumber);\n                    }\n                } else if (giveawayUsers.length <= numberOfWinners) {\n                    for (i = 0; i < giveawayUsers.length; i++) {\n                        winnerArray.push(giveawayUsers[i]);\n                    }\n                }\n\n                for (i = 0; i < winnerArray.length; i++) {\n                    winnerText = winnerText + winnerArray[i] + '\\n';\n                }\n\n                giveawayEmbed.description = giveawayEmbed.description + `\\n\\nThe winners are..\\n${winnerText}`;\n                giveawayMessage.edit(giveawayEmbed)\n                channelToFetch.send(`🎉 Congratulations! 🎉 \\n ${winnerText} \\nThey have won **${giveawaysDue[counter][\"itemGivingAway\"]}**`)\n\n            } else {\n                giveawayEmbed.description = giveawayEmbed.description + \"\\n\\nNo one entered the giveaway and thus no one won.\"\n                giveawayMessage.edit(giveawayEmbed);\n                channelToFetch.send(`🎉 Giveaway Ended 🎉\\n\\nNo one entered the giveaway and thus no one won.`)\n            }\n        }\n        counter += 1;\n        if (counter >= giveawaysDue.length) {\n            clearInterval(interval);\n        }\n    }","storage":"0","varName":"","name":"Run Script"},{"time":"7","measurement":"1","name":"Wait"},{"storage":"3","varName":"giveawayRan","changeType":"0","value":"null","name":"Control Variable"}],"temp2":"America/New_York","restriction":"0"}]